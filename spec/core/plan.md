<!-- spec-flow: план реализации -->

Заготовка помогает оформить план реализации фичи в процессе **spec-flow**.

**Параметры**
- **FEATURE** — название папки, в которой будет сохранён план (например, `<feature>payments</feature>`).
- **CONTEXT** — основной контекст для подготовки плана (например, `<context>функционал для …</context>`).

Параметры приходят в виде XML-подобных тегов; значением считается всё содержимое между открывающим и закрывающим тегом.

**Общие правила**
- Работай только с файлами спецификаций: не создавай код и новые каталоги.
- Используй `spec/features/{FEATURE}/spec.md` как дополнительный контекст. Если файл недоступен, продолжай работу, опираясь на **CONTEXT**.
- Подставляй конкретные значения вместо заглушек (`{FEATURE}`, `{CONTEXT}` и т.п.). Если раздел не применим — адаптируй формулировку или замени её пояснением.
- Формируй содержательные абзацы или списки: не оставляй пустых заголовков, комментариев-подсказок и маркеров `...`.

**Что требуется раскрыть в плане**
- `## Источники данных / схемы` — хранилища, миграции, индексы, работа с данными и внешними источниками.
- `## Контракты и интерфейсы` — публичные API, события, очереди, UI/CLI, форматы ошибок и ожидания по валидации.
- `## Архитектура / Компоненты` — сервисы, модули, интеграции, ограничения и выбранный стек (БД, API, UI, очереди, фоновые процессы и т.д.).
- `## Риски` — потенциальные проблемы и способы смягчения.
- `## Допущения` — явные предположения и недостающие сведения.

**Шаги**
1. Начни результат с комментария для указания пути сохранения:
   ```md
   <!-- SAVE_AS: spec/features/{FEATURE}/plan.md -->
   ```
2. Сформируй план по разделам выше, опираясь на **CONTEXT** и доступный дополнительный контекст. Для каждого раздела фиксируй, что именно нужно сделать, а не только перечисляй компоненты.
3. Проверь, что в документе нет незаполненных заглушек и что вывод оформлен валидным Markdown.

**Шаблон результата**
```md
# План реализации

**Фича:** {CONTEXT}

## Источники данных / схемы

## Контракты и интерфейсы

## Архитектура / Компоненты

## Риски

## Допущения
```

Пиши строго в Markdown и не добавляй ничего вне документа. **Цель** — сохранить файл `/spec/features/{FEATURE}/plan.md` с описанием того, КАК реализуем фичу на основе **CONTEXT**.
